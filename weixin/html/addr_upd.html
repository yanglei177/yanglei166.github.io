<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <link rel="shortcut icon" href="../images/logo5.ico"/>
    <meta name="keywords" content="" />
    <meta name="description" content="" />
    <title>编辑收件地址</title>
    <link rel="stylesheet" href="../css/reset.css">
    <link rel="stylesheet" href="../css/base.css">
  </head>
<body>
    <section class="list_box bg_gradient bor_no">
    	<form id="inputForm">
    	<ul class="botpad">
        	<li>
                <div class="text_box verifydes">
                    <input type="text" id="city" name="city" class="text textarr" placeholder="请选择省市区">
                    <select class="select">
                        <option>北京市</option>
                        <option>青岛市</option>
                        <option>济南市</option>
                    </select>
                </div>                     
                <p class="des clr"></p>              
            </li>
            <li>
                <div class="text_box text_area verifydes">
                    <textarea class="area" id="detail" name="detail" placeholder="请您如实填写详细收货地址，例如街道名称，门牌号码，楼层和房间号等信息。">北苑家园2号楼</textarea>
                </div>                   
                <p class="des clr"></p>              
            </li>
            <li>
                <div class="text_box verifydes">
                    <input type="tel" id="postCode" name="postCode" class="text" placeholder="请输入邮编，如您不清楚，可以为空">
                </div>                     
                <p class="des clr"></p>              
            </li>
            <li>
                <div class="text_box verifydes">
                    <input type="text" id="recipient" name="recipient" class="text" value="马向泽" placeholder="请输入收件人姓名，不得超过25个字符">
                </div>                    
                <p class="des clr"></p>              
            </li>
            <li>
                <div class="text_box verifydes">
                    <input type="tel" id="phone" name="phone" class="text" placeholder="请输入11位手机号码">
                </div>                    
                <p class="des clr"></p>              
            </li>            
        </ul>
        <input type="hidden" id="id" name="id" />        
        <div class="editbox">
        	<input id="delBtn" type="button" class="delbtn" value="删除" />
            <input id="updBtn" type="submit" class="editbtn" value="修改" />
        </div>
        </form>        
    </section><!-- bg_gradient end -->       
<div id="loadingbox"></div>    
<script src="../js/jquery-2.1.4.min.js"></script>
<script src="../js/jquery.validate.js"></script>
<script src="../js/common.js"></script>
<script type="text/javascript">
 $(function(){
	$("#inputForm").validate({
		rules: {
			city: "required",
			detail:{
				required: true,
				minlength: 10
			},
			postCode:{
				zipcode: true
			},
			recipient: {
				required: true,
				maxlength: 25			
			},
			phone: {
				required: true,
				telephone: true
			}					
		},
		messages: {
			phone: {
				required: "请输入手机号",
				telephone:"请输入正确手机号"
			},
			detail:{
				required: "请输入详细地址",
				minlength: jQuery.format("详细地址不能小于{0}个字 符")
			},		
			postCode: {
				zipcode: "邮政编码输入不正确"
			},			
			recipient: {
				required: "请输入收件人姓名",
			},
			city: {
				required: "请选择所在地",
			}
		},
		submitHandler:function(){
			var reqData = $("form").serialize();	
			baopRequest.sendData("customer/addr/update", reqData, 
					function(data){
						baopRequest.bp_alert(data.message,"2500");
						if (data.code == 0) {
							location.href="addr_list.html";     
						}else{
						   
						}
					}
			); 			
		}
		
	});
	
	
    $("#delBtn").click(function(){    	
		//var addrIds = "1";
		var reqData = "ids=" + $("#id").val();	
		//alert(reqData);
		baopRequest.sendData("customer/addr/del", reqData, 
				function(data){
					//baopRequest.bp_alert("提示信息",true);
					baopRequest.bp_alert(data.message,"2500");
					if (data.code == 0) {
						location.href="addr_list.html";
					}else{
					   
					}				
				}
		);
			
     });
    
    var viewId = baopRequest.getURLParam("id");    
    baopRequest.sendData("customer/addr/find", "id=" + viewId, 
			function(data){				
 	            $("#city").val(data.vo.city);
	            $("#detail").text( data.vo.detail);
	            $("#postCode").val(data.vo.postCode);		
	            $("#recipient").val(data.vo.recipient);
	            $("#phone").val( data.vo.phone);
	            $("#id").val(data.vo.id);		            
			}
	);
    
    
    
 	
 });
</script>

</body>
</html>