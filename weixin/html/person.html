<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <link rel="shortcut icon" href="../images/logo5.ico"/>
    <meta name="keywords" content="" />
    <meta name="description" content="" />
    <title>编辑我的信息</title>
    <link rel="stylesheet" href="../css/reset.css">
    <link rel="stylesheet" href="../css/base.css">
  </head>
<body>
    <section class="list_box bg_gradient bor_no">
    	<form id="inputForm">
    	<ul class="botpad">
        	<li>
            	<div class="botth">手机号：</div>
            	<div class="bottd mar_t_10"><span id="telephone">13609384346</span></div>  
                <p class="clr"></p>              
            </li>
            <li>
                <div class="text_box verifydes">
                    <input type="text" id="name" name="name" class="text" value="">
                </div>                   
                <p class="des clr"></p>              
            </li>
            <li>
                <div class="botth">性   别：</div>            
                <div id="sexSel" class="bottd verifydes mar_t_10" >
                    <span class="marrigh simulateradio"><i name="male" type="0" class="imgsprite radio on" ></i>先生</span>
                    <span class="marrigh simulateradio"><i name="female" type="1" class="imgsprite radio" ></i>女士</span>
                </div>                
                <p class="des clr"></p>
            </li>
            <li>
                <div class="text_box verifydes">
                    <input type="text" id="card" name="card" class="text" placeholder="请输入身份证号码" />
                </div>                     
                <p class="des clr"></p>              
            </li>
            <li>
                <div class="text_box verifydes">
                    <input type="text" id="city" name="city" class="text textarr" placeholder="请选择所在地" />
                    <select id="selCity"   class="select">
                        <option>北京市</option>
                        <option>青岛市</option>
                        <option>济南市</option>
                    </select>
                </div>                                        
                <p class="des clr"></p>              
            </li>
            <li>
                <div class="text_box verifydes">
                    <input type="email" id="email" name="email" class="text" placeholder="请输入常用邮箱" />
                </div>                    
                <p class="des clr"></p>              
            </li>  
            <input type="hidden" id="id" name="id" />          
        </ul>
        <input type="submit" class="combtn" value="修改" />
        </form>        
    </section><!-- bg_gradient end --> 
<div id="loadingbox"></div>          
<script src="../js/jquery-2.1.4.min.js"></script>
<script src="../js/jquery.validate.js"></script>
<script src="../js/common.js"></script>
<script type="text/javascript">
 $(function(){
	$("#inputForm").validate({
		rules: {
			name: {
				required: true
			},
			city: "required",
			card: {
				required: true
			},
			email: {
				required: true,
				email: true
			}
		},
		messages: {
			name: {
				required: "请输入姓名"
			},
			city: {
				required: "请选择所在地"
			},
			card: {
				required: "请输入身份证号码"
			},
			email: {
				required: "请输入Email地址",
				email: "请输入正确的email地址"
			}
		},
		submitHandler:function(){
			var reqData = $("form").serialize() + '&sex=' + $("#sexSel").find("i.on").attr("type") ;
			//alert(reqData);
			baopRequest.sendData("customer/update", reqData ,			
					function(data){
						baopRequest.bp_alert(data.message,"2000");
						if (data.code == 0) {
							location.href="center.html";     
						}else{
							
						}
						
					}
			); 
		}
	});
	

	var uid = window.localStorage.getItem("uid");//"1";	
	var reqData = "uid="+uid;	
	baopRequest.sendData("customer/find", reqData,function(data){
				if (data.code == 0) {console.log(data)					
	 	            $("#telephone").text(data.vo.telephone);
		            $("#name").val( data.vo.name);
		            $("#card").val( data.vo.card);
		            
		            if(data.vo.sex == 0){
		            	$("i[name=male]").addClass("on").parent("span").siblings("span").find("i").removeClass("on");
		            }else{
		            	$("i[name=female]").addClass("on").parent("span").siblings("span").find("i").removeClass("on");
		            }
		            //TODO
		            //$("#idCardNo").val( data.vo.idCardNo);
		            $("#city").val( data.vo.city);
		            $("#email").val(data.vo.email);	
		            $("#id").val(data.vo.id);
				}else{
					baopRequest.bp_alert(data.message,"2500");
				}		
			}
	);
	
 });
</script>

</body>
</html>